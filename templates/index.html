<!doctype html>
<html>
    <head>
        <title>Climate_Analysis_App</title>

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="chrome">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <!-- Calendar JS -->
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <link rel="stylesheet" href="/resources/demos/style.css">
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script>
            $( function() {
                $( "#from" ).datepicker({ 
                                          changeMonth: true,
                                          changeYear: true
                                        });
                $( "#from" ).datepicker("option", "dateFormat", "yy-mm-dd");

                $( "#to" ).datepicker({ 
                                          changeMonth: true,
                                          changeYear: true
                                        });
                $( "#to" ).datepicker("option", "dateFormat", "yy-mm-dd");

            } );

        </script>

        <!-- Style CSS -->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">


    </head>

    <body>
        <div class="container-fluid">
            <div class="row ml-2">
            <h1>Climate_Analysis_App</h1>
            </div>
            <div class="row">
                <div class="col-lg-5.5 align-self-center">
                    <img src="/static/surfs-up.png" alt="A surfer on the sea" width=700>
                </div>
                <div class="col align-self-center">
                    <p style="font-size: 3em;">Let's go Honolulu, Hawaii !!</p>
                    <p style="font-size: 20px;">I want to go there for <code>15 days</code>. Which dates would be the best for me to depart?</p>
                    <p style="font-size: 20px;">Before the decision making, I need to check weather condition there querying the <code>weather database</code> which contains all the historical weather data such as <em>precipitation</em>, <em>temperature observations</em>, and <em>station information</em>.</p>
                    <p style="font-size: 20px;">It will be fun to play with! Let's start!</p>
                    
                </div>
            </div>
            <hr>
            <div class="row ml-2">
                <h2><strong>Available Route</strong></h2>
            </div>
            <div class="row">
                <div class="col-8">
                    <table class="table">
                    {% for table in tables %}
                        {{ table | safe }}
                    {% endfor %}
                    </table>
                </div>
                <div class="col">
                    <h4>Basic stats on temperature</h4>
                    <br>
                    <p style="margin-left: 40px">Start Date: <input class="start" type="text" id="from" onchange="get_startdate_to_link()"></p>
                    <p style="margin-left: 40px">End Date: <input class="end" type="text" id="to" onchange="get_enddate_to_link()"></p>
                    <a style="margin-left: 40px" href="http://127.0.0.1:5000/api/v1.0/[start_date]" id="query_date">Click after setting date(s)</a>
                    <hr>
                    <p style="margin-left: 40px"><strong>Note:</strong> You can put either <code>start date</code> only or both <code>start</code> and <code>end date</code>.</p>
                </div>
            </div>
        </div>

        <script>

                function get_startdate_to_link() {
                    var currentStartDate = document.getElementsByClassName('start')[0].value                    
                   
                    var start_date = document.getElementById("query_date");
                        start_date.setAttribute("href", `http://127.0.0.1:5000/api/v1.0/${currentStartDate}`);
                        start_date.innerHTML = `http://127.0.0.1:5000/api/v1.0/${currentStartDate}`;
                }

                function get_enddate_to_link() {
                    var currentStartDate = document.getElementsByClassName('start')[0].value
                    var currentEndDate = document.getElementsByClassName('end')[0].value
                    
                    var start_end_date = document.getElementById("query_date");
                        start_end_date.setAttribute("href", `http://127.0.0.1:5000/api/v1.0/${currentStartDate}/${currentEndDate}`);
                        start_end_date.innerHTML = `http://127.0.0.1:5000/api/v1.0/${currentStartDate}/${currentEndDate}`;
                }
            
        </script>
    </body>
</html>